
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>网络寻租</title>
  <meta name="author" content="机械唯物主义">

  
  <meta name="description" content="今天学习了一下utf8的相关概念, 发现自己的理解还是不很透彻, 这里整理一下: 什么是UCS? 我们首先需要知道如何标识一个具体的字符, 国际上对于字符标识有一个东西,
叫UCS, 全称: Universal Character Set, 它是关于所有字符编码的标准. 简单地说, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.linjunhalida.com/blog/page/25/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="网络寻租" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!-- <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->
<!-- <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26509244-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">网络寻租</a></h1>
  
    <h2>Programmer, Gamer, Hacker</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.linjunhalida.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">博客</a></li>
  <li><a href="/blog/categories/english">English Blog</a></li>
  <li><a href="/about">关于我</a></li>
  <li><a href="/blog/archives">存档</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/utf8/">Utf8介绍</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-02T20:11:07+08:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2011</time>
        
         | <a href="/blog/utf8/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天学习了一下utf8的相关概念, 发现自己的理解还是不很透彻, 这里整理一下:</p>

<h2>什么是UCS?</h2>

<p>我们首先需要知道如何标识一个具体的字符, 国际上对于字符标识有一个东西,
叫UCS, 全称: Universal Character Set,</p>

<p>它是关于所有字符编码的标准. 简单地说,
为了能够规范我们所有字符的表示形式, 把所有字符都映射成一张表,
每个字符都指代单独的一个数字做标识.</p>

<h2>什么是UTF-8?</h2>

<p>上面的UCS只是表示字符的标识, 并没有说明具体的表示方式是什么.
所以就有了UTF-8, 用来把UCS转换成计算机能够处理的字符串. 它为了节省空间,
方便解析和除错做了优化. 具体表示方式如下:</p>

<ul>
<li>小于u80的字符, 直接打印为一个字符, 这个是为了和ASCII标准兼容.</li>
<li>大于等于u80小于u800的字符, 分割成2个字符, 第一个字符开始为110,
第二个字符开始为10, 拆分的方法是先填满后面的字符(等会看后面的例子).</li>
<li>以此类推&hellip;</li>
</ul>


<p>说的不是太清楚, 这里有一个UCS映射到UTF-8的表, 一看就明白了:</p>

<pre><code>U-00000000 – U-0000007F:    0xxxxxxx
U-00000080 – U-000007FF:    110xxxxx 10xxxxxx
U-00000800 – U-0000FFFF:    1110xxxx 10xxxxxx 10xxxxxx
U-00010000 – U-001FFFFF:    11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
U-00200000 – U-03FFFFFF:    111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
U-04000000 – U-7FFFFFFF:    1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
</code></pre>

<p>同时, 长的表示方式不能涵盖短的表示方式,
所以下面的范围是错误的(可以快速排除错误):</p>

<pre><code>1100000x (10xxxxxx)
11100000 100xxxxx (10xxxxxx)
11110000 1000xxxx (10xxxxxx 10xxxxxx)
11111000 10000xxx (10xxxxxx 10xxxxxx 10xxxxxx)
11111100 100000xx (10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx)
</code></pre>

<p>我们来看具体的例子(python代码):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="c1"># 比如©这个符号, UCS的标识为: \u00a9:</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u00A9</span><span class="s2">&quot;</span>
</span><span class='line'><span class="err">©</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># 我们把a9转换成真正的表示方式:</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u00A9</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;</span><span class="se">\xc2\xa9</span><span class="s1">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># 我们也可以把真正的表示方式转换成标准里面的标识.</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;</span><span class="se">\xc2\xa9</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\xa9</span><span class="s1">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># 我们来看一个分割的例子:</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u2260</span><span class="s1">&#39;</span>
</span><span class='line'><span class="err">≠</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># 转换成utf8就被拆散了:</span>
</span><span class='line'><span class="c1"># u+2260 = 0010 0010 0110 0000</span>
</span><span class='line'><span class="c1"># 11100010 10001001 10100000 = 0xE2 0x89 0xA0</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u2260</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;</span><span class="se">\xe2\x89\xa0</span><span class="s1">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>结论</h2>

<p>现在还没有什么心得, 总之, 了解了上面的概念,
才能处理好平时遇到的字符编码问题.</p>

<p>参考资料: &ndash;
<a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html">http://www.cl.cam.ac.uk/\~mgk25/unicode.html</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/how-to-learn-python/">如何学习python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-25T11:20:51+08:00" pubdate data-updated="true">Feb 25<span>th</span>, 2011</time>
        
         | <a href="/blog/how-to-learn-python/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://images.amazon.com/images/P/0596002815.01.LZZZZZZZ.jpg" alt="image" /></p>

<p>我们假设你是一个初级程序员, 只懂得一点点的基础知识,
希望能够用python来做开发. 这篇文档就是为了满足以上目标而写的.</p>

<h2>大纲</h2>

<p>按照这篇文档所指示的任务过一遍, 你就能够做到:</p>

<ul>
<li>熟悉python语言, 以及学会python的编码方式.</li>
<li>熟悉python库, 遇到开发任务的时候知道如何去找对应的模块.</li>
<li>知道如何查找和获取第三方的python库, 以应付开发任务.</li>
</ul>


<h2>学习步骤</h2>

<h2>安装开发环境</h2>

<p>如果你在window下, 去下载pythonxy安装起来, 然后运行python,
进入python解释环境.</p>

<p>如果你在ubuntu下, 执行: sudo apt-get install python,
然后在命令行下运行python, 进入python解释环境.</p>

<h2>学习方法</h2>

<p>作为一名成熟的开发人员, 我学习新东西(假设是pyqt)的习惯方式是:</p>

<ul>
<li>直接用google搜索pyqt的官方网站.</li>
<li>按照官方网站的说明, 下载pyqt. (如果是用ubuntu,
看看软件库里面是否有足够新的版本)</li>
<li>下载过程中, 开始阅读官方网站上面的教程.</li>
<li>一边看教程, 一遍按照教程使用pyqt.</li>
<li>如果发现教程不够全面, 用google搜索是否有对应的教学书籍可以看.</li>
<li>示例学习完毕, 开发一个玩具程序, 用来检验自己是否需要用到的功能.</li>
</ul>


<h2>开始学习python</h2>

<p>我建议你学习的过程也按照上面来, 首先过一遍python官方文档:</p>

<p><a href="http://docs.python.org/tutorial/index.html">http://docs.python.org/tutorial/index.html</a></p>

<p>如果你觉得英文太有难度的话, 去看
<a href="http://sebug.net/paper/python/">python简明教程</a></p>

<p>或者这里有一个google的python课程:
<a href="http://code.google.com/edu/languages/google-python-class">http://code.google.com/edu/languages/google-python-class</a>/</p>

<p>然后做 <a href="http://www.pythonchallenge.com">http://www.pythonchallenge.com</a>/
这个网站上面的题目练练手. 如果卡在某一关太久, 可以看答案(google python
challenge answer), 做完后看看别人的编码方式和自己有什么区别.</p>

<h2>小项目</h2>

<p>做完一遍后, 你会发现已经熟悉了基本的python开发. 然后做点小项目吧.
这里是一些题目, 挑感兴趣的去做.</p>

<ul>
<li>写一个简单的计算器/记账软件/扫雷游戏(用pyqt库做界面)</li>
<li>写一个聊天室网站(用webpy框架, jquery刷新新的回复)</li>
<li>写一个爬虫, 获取douban上面所有用户的地点,
画地点分布的直方图(用lxml解析, 保存数据到sqlite里面去,
用matplotlib画图)</li>
</ul>


<h2>FAQ</h2>

<p>Q: 遇到了问题, 到哪里求助?</p>

<p>A: 上
<a href="http://groups.google.com/group/python-cn">http://groups.google.com/group/python-cn</a>
(需要翻墙) 或者 <a href="http://stackoverflow.com">http://stackoverflow.com</a>
提问就可以了.</p>

<p>Q: 如何查找python的某个功能?</p>

<p>A: 看官方文档.
<a href="http://docs.python.org/library/index.html">http://docs.python.org/library/index.html</a></p>

<p>Q: 如何用python完成一个任务(比如写网站)?</p>

<p>A: google: python 写网站, 或者 google: python web development.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/not-work-8-hours-a-day/">你不需要一天工作8小时</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-24T16:43:14+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time>
        
         | <a href="/blog/not-work-8-hours-a-day/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://cimg2.163.com/tech/2007/11/5/2007110521233984d3a.jpg" alt="image" /></p>

<p>我们每天定时起床, 吃饭, 上公车, 赶在9点之前到达公司,
然后在哈欠中开始一天的工作.</p>

<p>刚刚打开电脑, 看了一个小时的邮件, 打算真正开始工作的时候,
就被邮件通知需要参加一个有很多头头出席的会议,
会议里面讨论的东西和你八杆子打不着,
等到最后的时候才问你一个很简单的问题,
或者布置给你一个这周必须解决的任务.</p>

<p>终于从封闭的小会议室里面出来, 呼吸到了一点新鲜空气, 觉得自己要休息一会,
上上网聊聊天(如果老板不在的话). 忙碌一会后, 到了吃中午饭的时间.</p>

<p>中午只有半个小时的休息时间, 刚好吃个午饭, 回到座位上又开始工作,
但是晕乎乎地一下午过去了, 然后发现到了下班时间, 头脑瞬间清醒过来,
发出几封必须得在今天发出来的邮件, 然后把电脑关掉下班.
回到家里面发现自己太疲惫了以至于只好看看电视剧打发时间.</p>

<p>这是我们一天的工作, 这是我们一天的生活. 但是问问自己, 一天完成了什么?
每天工作8小时, 下班后疲惫不堪,
有谁能够敢说这一天真正做了什么有价值的事情?</p>

<h2>如果&hellip;.</h2>

<p>每天早上来到公司, 你是不是很困? 那是因为你睡眠不足,
人不应该在这个时间工作, 而是去小跑一会, 和其他人聊聊天, 说说话.</p>

<p>你不一定要参与开会, 你只需要和其中的一个人或者几个人发发邮件,
实在不行了, 找2,3个人开开小会就可以了.</p>

<p>你不一定要在下午工作时间到了的时候开始干活,
半个小时的午睡就能让你精神焕发.</p>

<p>甚至你不需要每天都在办公室里面坐8小时, 办公室环境嘈杂, 甚至乌烟瘴气,
你到一个公园里面散一会步就能把困扰你一个星期的问题解决掉.</p>

<p>甚至你不需要去完成现在的工作, 你可以和老板说,
这部分的任务可以找一个外包公司, 甚至一个商业软件,
花费的钱比自己的人力费用少一半, 并且非常的稳定.</p>

<p>话说回来, 这份工作只是工作, 你应该拥有控制自己工作时间内干什么的权力.
老板给你钱是为了让你解决问题, 而不是让你当他的傀儡.
完成布置给你的事情就好了, 剩下的时间是你赢得的,
你可以做任何你想做的事情.</p>

<p><strong>只要不要把工作搞砸</strong>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/shpaml-source-code/">Shpaml源码分析</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-20T21:43:59+08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2011</time>
        
         | <a href="/blog/shpaml-source-code/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在上次已经
<a href="http://server.linjunhalida.com/blog/article/shpaml%E4%BB%8B%E7%BB%8D/">介绍过shpaml</a>,
它的代码总共只有365行, 既然这么一点代码, 没有理由不分析分析它的具体实现.</p>

<p>首先, 代码可以在这里看到:
<a href="http://shpaml.webfactional.com/source_code">http://shpaml.webfactional.com/source_code</a></p>

<p>首先是入口出的代码:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="c1"># if file name is given convert file, else convert stdin</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">shpaml_text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">shpaml_text</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">convert_text</span><span class="p">(</span><span class="n">shpaml_text</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>这里面是实现以下3种语法的功能, 太简单就不说了:</p>

<blockquote><p>python -c &ldquo;import shpaml; shpaml.convert_text()&rdquo; echo &lsquo;b | foo&rsquo; |
python shpaml.py touch test.shpaml; python shpaml.py test.shpaml</p></blockquote>

<p>然后, 从convert_text函数,
一直深入调用到了indent_lines函数(外面的几层都是包装), 这个才是重心.</p>

<p>我们知道, html是树状的, 输入的shpaml格式的文档本质上也是树状的.
我们需要把shpaml按照树状的方式解析出来,
同时对分析出来的数据做处理(加&lt;>以及结尾加&lt;/tag>).</p>

<p>简单地介绍下代码里面的处理方式. 程序内嵌一个recurse函数,
这个函数的输入是字符串列表(就是需要转换的文本啦),
处理文本的时候如果发现有新的子树, 就会嵌套调用recurse,
用函数调用栈的方式来遍历tag树. 每次处理文本,
都会把生成的文本放到output这个字符串列表里面去. 下面是具体的代码:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="k">def</span> <span class="nf">indent_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span>
</span><span class='line'>            <span class="n">output</span><span class="p">,</span>
</span><span class='line'>            <span class="n">branch_method</span><span class="p">,</span>
</span><span class='line'>            <span class="n">leaf_method</span><span class="p">,</span>
</span><span class='line'>            <span class="n">pass_syntax</span><span class="p">,</span>
</span><span class='line'>            <span class="n">flush_left_syntax</span><span class="p">,</span>
</span><span class='line'>            <span class="n">flush_left_empty_line</span><span class="p">,</span>
</span><span class='line'>            <span class="n">indentation_method</span><span class="p">,</span>
</span><span class='line'>            <span class="n">get_block</span><span class="p">,</span>
</span><span class='line'>            <span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Returns None.</span>
</span><span class='line'><span class="sd">    一堆注释不管它</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">append</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">append</span>
</span><span class='line'>    <span class="c1"># 递归调用函数</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">recurse</span><span class="p">(</span><span class="n">prefix_lines</span><span class="p">):</span>
</span><span class='line'>        <span class="c1"># 循环解析传进来的字符串列表</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">prefix_lines</span><span class="p">:</span>
</span><span class='line'>            <span class="c1"># 列表已经处理过了, 分割成空格的前缀和后面的字符</span>
</span><span class='line'>            <span class="n">prefix</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">prefix_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span class='line'>                <span class="n">prefix_lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>                <span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>                <span class="k">continue</span>
</span><span class='line'>            <span class="c1"># 我们看看这一行是否有缩进</span>
</span><span class='line'>            <span class="n">block_size</span> <span class="o">=</span> <span class="n">get_block</span><span class="p">(</span><span class="n">prefix_lines</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">block_size</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                <span class="c1"># 如果没有缩进, 就根据状况来处理</span>
</span><span class='line'>                <span class="n">prefix_lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="n">pass_syntax</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">pass</span>
</span><span class='line'>                <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">flush_left_syntax</span><span class="p">):</span>
</span><span class='line'>                    <span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">flush_left_syntax</span><span class="p">):])</span>
</span><span class='line'>                <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">flush_left_empty_line</span><span class="p">):</span>
</span><span class='line'>                    <span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">leaf_method</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="c1"># 如果是一个新的缩进, 我们需要找到缩进的结尾, 然后把这一块数据取出来, </span>
</span><span class='line'>                <span class="c1"># 让branch_method处理下来</span>
</span><span class='line'>                <span class="n">block</span> <span class="o">=</span> <span class="n">prefix_lines</span><span class="p">[:</span><span class="n">block_size</span><span class="p">]</span>
</span><span class='line'>                <span class="n">prefix_lines</span> <span class="o">=</span> <span class="n">prefix_lines</span><span class="p">[</span><span class="n">block_size</span><span class="p">:]</span>
</span><span class='line'>                <span class="n">branch_method</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span>
</span><span class='line'>            <span class="c1"># 循环消耗prefix_lines, 直到消耗完毕, 任务就完成了.</span>
</span><span class='line'>        <span class="k">return</span>
</span><span class='line'>    <span class="n">prefix_lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">indentation_method</span><span class="p">,</span> <span class="n">lines</span><span class="p">))</span>
</span><span class='line'>    <span class="n">recurse</span><span class="p">(</span><span class="n">prefix_lines</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>recurse 最后会进入到2个函数里面去, 一个是leaft_method,
它处理单行的一些语法, 比如: tag > tag2 > tag3 | text,
也是采用上面那种循环消耗字符串的方法. 这里略过不表.</p>

<p>另一个就是branch_method, 这里面的值是函数html_block_tag.
它里面是处理缩进后的一些语法. 处理完头部之后,
会把缩进里面的内容传给recurse函数, 就这样一步步解析玩子树.
里面的append函数就把解析玩的内容传给output, 最后打印成html代码.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="k">def</span> <span class="nf">html_block_tag</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">recurse</span><span class="p">):</span>
</span><span class='line'>    <span class="n">append</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">append</span>
</span><span class='line'>    <span class="n">prefix</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">RAW_HTML</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
</span><span class='line'>        <span class="c1"># 如果是html代码(&lt;开头)就不解析头部</span>
</span><span class='line'>        <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="c1"># 解析子树</span>
</span><span class='line'>        <span class="n">recurse</span><span class="p">(</span><span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>    <span class="k">elif</span> <span class="n">COMMENT_SYNTAX</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
</span><span class='line'>        <span class="c1"># 注释..</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="k">elif</span> <span class="n">VERBATIM_SYNTAX</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
</span><span class='line'>        <span class="c1"># 子树不解析, 直接打印出来</span>
</span><span class='line'>        <span class="n">m</span> <span class="o">=</span> <span class="n">VERBATIM_SYNTAX</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="n">tag</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</span><span class='line'>        <span class="n">start_tag</span><span class="p">,</span> <span class="n">end_tag</span> <span class="o">=</span> <span class="n">apply_jquery_sugar</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">start_tag</span><span class="p">)</span>
</span><span class='line'>        <span class="n">stream</span><span class="p">(</span><span class="n">append</span><span class="p">,</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>        <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">end_tag</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="c1"># 普通的状况, 解析出tag</span>
</span><span class='line'>        <span class="n">start_tag</span><span class="p">,</span> <span class="n">end_tag</span> <span class="o">=</span> <span class="n">apply_jquery_sugar</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="c1"># 输出tag头</span>
</span><span class='line'>        <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">start_tag</span><span class="p">)</span>
</span><span class='line'>        <span class="c1"># 解析子树</span>
</span><span class='line'>        <span class="n">recurse</span><span class="p">(</span><span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>        <span class="c1"># 输出tag尾</span>
</span><span class='line'>        <span class="n">append</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">end_tag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>结论</h2>

<p>shpaml采用函数嵌套调用的方法来解析和处理树状结构,
这个也是通常用的解析树状结构的方法(如果树状结构嵌套不多的话),
对于编程语法的解析, 也可以采用类似这样的方式,
对于每一个语法规则都有一个函数, 然后嵌套调用解析, 直到解析完毕.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/shpaml/">Shpaml介绍</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-15T16:15:51+08:00" pubdate data-updated="true">Feb 15<span>th</span>, 2011</time>
        
         | <a href="/blog/shpaml/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://www.rubyinside.com/wp-content/uploads/2007/03/haml.jpg" alt="image" /></p>

<p>不知道大家是否都写过html或者xml, 里面尖括号真是既然写又难看,
这里推荐给大家一个非常好用的工具:
<a href="http://shpaml.webfactional.com/">shpaml</a>.</p>

<p><a href="http://shpaml.webfactional.com/">shpaml</a> 是借鉴
<a href="http://haml-lang.com/">haml</a> (就是上面那个图片啦) 的一个工具,
可以极大地简化html/xml的编写工作. 并且不像haml那么重量级.</p>

<p>shpaml的生成工具只是一个简单的python文件, 你只需要在
<a href="http://shpaml.webfactional.com/shpaml_py">这里</a> 下载即可.
整个文件只有365行!</p>

<h2>简单尝试一下</h2>

<p>我们来看一个实际的例子. 比如我们需要写下面的html代码:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span><span class='line'>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;top-nav&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;top-nav-items&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
</span><span class='line'>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;wrapper&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;header&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;sidebar&quot;</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;footer&quot;</span><span class="p">&gt;</span>
</span><span class='line'>        @2010 linjunhalida, all right reserved
</span><span class='line'>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class='line'>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>即使能够利用工具来自动生成很多文本, 上面的代码也非常难以阅读.
但是用shpaml的方式就不一样了</p>

<pre><code>html
  body
    #top-nav
      #top-nav-items
    &gt; hr

    #wrapper
      #header
      #content
      #sidebar
      #footer
        @2010 linjunhalida, all right reserved
</code></pre>

<p>是不是感觉一下清爽很多? 写起来也不那么废手指了?</p>

<p>具体语法, 直接查阅
<a href="http://shpaml.webfactional.com/tutorial/1">shpaml官方教程</a> , 很简单的,
半小时搞定.</p>

<h2>生成html代码</h2>

<p>那么接下来我们如何把上面的文本生成html代码呢? 先保存成一个文件: xxx.shp,
然后运行</p>

<pre><code>python shpaml.py xxx.shp &gt; xxx.html
</code></pre>

<p>shpaml.py在 `这里`_ 下载.</p>

<p>打开xxx.html, 是不是和上面的html一模一样? 其他生成方法, 可以见
<a href="http://shpaml.webfactional.com/source_code">shpaml源码页面</a>.</p>

<h2>结论</h2>

<ul>
<li>shpaml采用缩进的方式来表示层级的递进, 这个方法和python的方法一致,
对于python程序员来说应该会很亲切.</li>
<li>shpaml用python写成, 整个代码只在一个文件里面,
感兴趣的同学可以学习学习. 它也非常容易嵌入到其他web框架中去.</li>
<li>同样的, 如果你发现一个数据源存在很多的冗余信息(就像上面的html/xml),
可以仿照shpaml的方法, 来实现一个上层的模板语言.</li>
</ul>


<p>希望你和我一样, 喜欢上shpaml.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/read-rss-as-email/">如何把rss当作邮件来阅读</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-14T16:18:47+08:00" pubdate data-updated="true">Feb 14<span>th</span>, 2011</time>
        
         | <a href="/blog/read-rss-as-email/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://freshbump.com/graphics/image_files_480x400/480x400_elisa-strozyk-sebastian-neeb-accordion-cabinet.jpg" alt="image" /></p>

<p>根据
<a href="http://gurudigger.com/idea/detail?iid=14987">大妈gurudigger里面的idea</a>,
我研究了一下如何把rss订阅都发送到邮箱中,
统一采用邮箱来处理每日的rss阅读.</p>

<p>尝试了一下以下工具/网站:</p>

<ul>
<li><a href="http://www.feedmyinbox.com">http://www.feedmyinbox.com</a>/
可以订阅站点, 但是只有5个免费站点名额, 并且是每个站点一封邮件.</li>
<li><a href="http://www.emailrss.cn">http://www.emailrss.cn</a>/ 国内的站点,
但是不知道效果如何.</li>
</ul>


<p>最后, 我在shlugchat里面发问, 某人推荐我使用
<a href="http://www.allthingsrss.com/rss2email/">rss2email</a>, 然后一试,
果然挺好用的.</p>

<p>rss2email会把所有的文章都以分开的邮件发送, 在gmail里面很好做阅读.</p>

<p>安装方法(已经在ubuntu源里面了)</p>

<pre><code>sudo apt-get install rss2email
</code></pre>

<p>其他系统请见 <a href="http://www.allthingsrss.com/rss2email/">rss2email</a>
官方网站.</p>

<h2>使用方法</h2>

<p>rss2email的工作目录在 \~/.rss2email里面, 需要先拷贝配置文件</p>

<pre><code>mkdir ~/.rss2email
cp /usr/share/doc/rss2email/examples/config.py ~/.rss2email/
</code></pre>

<p>然后, 需要修改config.py, 用来设置发送邮件的一些参数, 重点需要修改的是</p>

<pre><code># 默认是0, 需要改成1, 如果你像我一样采用gmail来发送的.
SMTP_SEND = 1 
# gmail的smtp服务器
SMTP_SERVER = "smtp.gmail.com"
# gmail需要认证, 所以改成1
AUTHREQUIRED = 1 
# 发送的邮箱用户名, 我为了区分专门注册了一个邮箱.
SMTP_USER = 'linjunhalida.rss.mail'  
# 密码
SMTP_PASS = 'xxx'  
</code></pre>

<p>好了, 我们输入需要接收rss邮件的邮箱</p>

<pre><code>r2e new you@yourdomain.com
</code></pre>

<p>然后一个一个增加rss源(必须是rss的位置, 而不是网站的名称, 不然抓取不到)</p>

<pre><code>r2e add http://feeds.feedburner.com/allthingsrss/hJBr
</code></pre>

<p>最后, 我们需要让r2e不发邮件跑一遍, 放弃当前时间点之前的数据</p>

<pre><code>r2e run --no-send
</code></pre>

<p>现在配置完成了, 每次只要你想看新的内容, 就可以执行以下命令</p>

<pre><code>r2e run
</code></pre>

<p>我设置了160个源, 运行比较慢. 我把它用crontab来作为后台程序跑了.
修改/etc/crontab, 添加上</p>

<pre><code>1 * * * * halida /usr/bin/r2e run
</code></pre>

<p>我设置的是每个小时的第一分钟去抓取, 以我自己的用户名(halida)来跑.</p>

<h2>结论</h2>

<p>更多的内容和介绍, 在:
<a href="http://www.allthingsrss.com/rss2email/getting-started-with-rss2email">http://www.allthingsrss.com/rss2email/getting-started-with-rss2email</a>/</p>

<p>鉴于现在做这个服务的网站不多, 什么时候我搭建一个服务器来玩玩..</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby-on-rails-head-first/">Ruby_on_rails初探</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-11T11:46:08+08:00" pubdate data-updated="true">Feb 11<span>th</span>, 2011</time>
        
         | <a href="/blog/ruby-on-rails-head-first/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://www.webaxes.com/wp-content/uploads/2010/06/ruby-on-rails.jpg" alt="image" /></p>

<p>好吧, 昨天看了一下ruby, 今天就要来看看ruby on rails了.</p>

<h2>哲学</h2>

<ul>
<li>DRY: 不写重复的东西</li>
<li>约定取代设置: rails假定了你要做的事情, 而不是你自己设置一切.</li>
<li>REST方式.</li>
</ul>


<h2>教程</h2>

<p>这里是一篇
<a href="http://guides.rubyonrails.org/getting_started.html#guide-assumptions">rails教程</a>,
按照上面的指示做一遍, 就对rails的思路和哲学有了一定了解了,
这里就不再重复.</p>

<h2>整体架构</h2>

<p><img src="http://dedicatedwebserverhosting.co.uk/Images/Tools%20for%20Ruby%20on%20Rails-2.png" alt="image" />
如上图, rails采用MVC架构. 进来的http请求,
交由Dispatcher分发给(设置文件是app/routes.rb)对应的controller(app/controller下面),
然后controller把数据交给view(app/views)渲染返回.</p>

<h2>特性</h2>

<h2>自动代码生成</h2>

<p>rails3里面可以用命令直接生成大量代码</p>

<pre><code>rails generate controller home index
rails generate scaffold Post name:string title:string content:text
</code></pre>

<p>运行之后生成了一堆文件. 节省了工作, 但是对于有洁癖的人来说, 会很不舒服.</p>

<h2>快捷方式</h2>

<p>rails提供了很多快捷方式以减少代码量, 比如对数据做验证:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span>  <span class="ss">:presence</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:presence</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
</span><span class='line'>                    <span class="ss">:length</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:minimum</span> <span class="o">=&gt;</span> <span class="mi">5</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>比如访问权限控制:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">before_filter</span> <span class="ss">:authenticate</span><span class="p">,</span> <span class="ss">:except</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:show</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># GET /posts</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">index</span>
</span><span class='line'>    <span class="vi">@posts</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">all</span>
</span><span class='line'>  <span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>这些看起来是ruby的哲学, 减少了代码量的同时,
把复杂度隐藏到framework里面了, 不好说是好事还是坏事.</p>

<h2>结论</h2>

<p>按照上面的教程走了一遍, 个人感觉:</p>

<ul>
<li>它注重快速开发, 用最少的代码来生成最多的功能.</li>
<li>ruby on rails采用命令来生成大量代码, 我个人非常不喜欢, 因为不够简洁.
但是对于快速开发, 这个方式节省了大量的编码工作.</li>
<li>它假设了一条最好的方式来做开发, 并鼓励开发者走这条道路.</li>
<li>个人觉得, 适合一次又一次地开发同类型的网站.</li>
</ul>


<p>上面只是对rails的初探, 很不完全, 也不深入. 如果有机会开发过一个项目,
可能有更深刻的体会. 但是还有其他的很多事情在等着我&hellip; 这个就先放下吧.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby-head-first/">Ruby初探</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-10T22:53:55+08:00" pubdate data-updated="true">Feb 10<span>th</span>, 2011</time>
        
         | <a href="/blog/ruby-head-first/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://www.ruby-lang.org/images/logo.gif" alt="image" /></p>

<h2>python和ruby的区别</h2>

<p>python经常被拿来和ruby做比较, 他们都是动态脚本语言,
在应用场景上面也非常相似. 我们听到的, 它们之间广为认知的区别是:</p>

<p>python
  ~ &ldquo;There should be one &ndash; and preferably only one &ndash; obvious way to do</p>

<pre><code>it."
</code></pre>

<p>ruby
  ~ &ldquo;There Is More Than One Way To Do It.&rdquo;</p>

<p>但是远远不止这些, 它们之间有无数的细节不同. 根据ruby官方网站上面给出的
<a href="http://www.ruby-lang.org/en/documentation/ruby-from-other-languages/to-ruby-from-python/">针对python程序员的介绍</a>
:</p>

<ul>
<li>Strings are mutable. <strong>字符串是可写的.</strong></li>
<li>You can make constants (variables whose value you don’t intend to
change). <strong>可以设置常量.</strong></li>
<li>There are some enforced case-conventions (ex. class names start with
a capital letter, variables start with a lowercase letter).
<strong>强制名称大小写.</strong></li>
<li>There’s only one kind of list container (an Array), and it’s
mutable. <strong>只有一个list容器</strong></li>
<li>Double-quoted strings allow escape sequences (like t) and a special
“expression substitution” syntax (which allows you to insert the
results of Ruby expressions directly into other strings without
having to &ldquo;add &rdquo; + &ldquo;strings &rdquo; + &ldquo;together&rdquo;). Single-quoted strings
are like Python’s r&#8221;raw strings&#8221;. <strong>&ldquo;&#8221;字符串可以内嵌语句</strong></li>
<li>There are no “new style” and “old style” classes. Just one kind.
<strong>只有一种类.(相对python有新旧之分)</strong></li>
<li>You never directly access attributes. With Ruby, it’s all method
calls. <strong>无法访问类的属性, 只能通过方法访问.</strong></li>
<li>Parentheses for method calls are usually optional.
<strong>执行方法可以不用括号.</strong></li>
<li>There’s public, private, and protected to enforce access, instead of
Python’s _voluntary_ underscore __convention__.
<strong>可以限制类方法的访问范围了.</strong></li>
<li>“mixin’s” are used instead of multiple inheritance.
<strong>mixin取代了多重继承.</strong></li>
<li>You can add or modify the methods of built-in classes. Both
languages let you open up and modify classes at any point, but
Python prevents modification of built-ins — Ruby does not.
<strong>可以修改系统内建类的方法.</strong></li>
<li>You’ve got true and false instead of True and False (and nil instead
of None). <strong>true/false/nil取代True/False/None</strong></li>
<li>When tested for truth, only false and nil evaluate to a false value.
Everything else is true (including 0, 0.0, &ldquo;&rdquo;, and []).
<strong>只有false/nil为假, 其他都为真.</strong></li>
<li>It’s elsif instead of elif. <strong>elsif取代elif</strong></li>
<li>It’s require instead of import. Otherwise though, usage is the same.
<strong>require取代import.</strong></li>
<li>The usual-style comments on the line(s) above things (instead of
docstrings below them) are used for generating docs.
<strong>代码上面的注释是文档.</strong></li>
<li>There are a number of shortcuts that, although give you more to
remember, you quickly learn. They tend to make Ruby fun and very
productive. <strong>很多快捷方式增加产能.</strong></li>
<li>There’s no way to unset a variable once set (like Python’s del
statement). You can reset a variable to nil, allowing the old
contents to be garbage collected, but the variable will remain in
the symbol table as long as it is in scope. <strong>变量是持久的,
不能被删除(除非自动垃圾收集掉)</strong></li>
</ul>


<p>上面只是一个总览, 没有给出实际的写ruby的感觉.
我们还是通过示例来看看ruby的特质.</p>

<h2>ruby特质</h2>

<p>下面的内容取自 <a href="http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177">the ruby programming
language</a>.</p>

<p>首先, ruby是面向对象的. 所有的值都是对象, 比如:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="mi">1</span><span class="o">.</span><span class="n">class</span>   <span class="c1"># =&gt; Fixnum</span>
</span><span class='line'><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">class</span> <span class="c1"># =&gt; Float</span>
</span></code></pre></td></tr></table></div></figure>


<p>注意上面, 函数和方法(上面的class)可以不用带括号, 直接执行, 并且没有歧义.
ruby是不能直接访问属性的, 所以不会混淆.</p>

<p>blocks 和 iterators 对python程序员看起来有点怪异,
但是看多了还是很好理解:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="mi">3</span><span class="o">.</span><span class="n">times</span> <span class="p">{</span><span class="nb">print</span> <span class="s2">&quot;ruby&quot;</span><span class="p">}</span>  <span class="c1"># 打印3遍 ruby</span>
</span><span class='line'><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">print</span> <span class="n">x</span><span class="p">}</span> <span class="c1"># 打印 123456789</span>
</span></code></pre></td></tr></table></div></figure>


<p>times和upto是整型的方法, 他们返回一个迭代器,
然后这个迭代器就执行下面{}内的代码.</p>

<p>ruby也有list和dict对应的数据结构:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="n">a</span>  <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">]</span> <span class="c1"># 和python一样也有list</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span>     <span class="c1"># do end和{}等价</span>
</span><span class='line'>    <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># :one是符号, 如果你知道lisp, 应该明白这个是什么, </span>
</span><span class='line'><span class="c1"># 如果你不知道.. 我也不知道怎么说, 就是符号啦.</span>
</span><span class='line'><span class="c1"># ruby的hash table写法好像没有python简洁.   </span>
</span><span class='line'><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:one</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:two</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">}</span>
</span><span class='line'><span class="n">d</span><span class="o">[</span><span class="ss">:one</span><span class="o">]</span> <span class="c1"># =&gt; 1</span>
</span><span class='line'><span class="n">d</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
</span><span class='line'>    <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2"> : </span><span class="si">#{</span><span class="n">key</span><span class="si">}</span><span class="s2">; &quot;</span> <span class="c1"># ruby 里面的字符串可以嵌入语句</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>ruby的语法是面向表达式的, if之类的控制符也是表达式, 比如:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="n">minimum</span> <span class="o">=</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="k">then</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span> <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>ruby的操作符是作为方法来实现的, 比如 + &ndash; * / [] 等,
都可以按照需要来定义.</p>

<p>取值和赋值是用不同的方法, 只是读取, 用 [], 如果要赋值, 就要用 []= 了.</p>

<p>这些个概念的区别, 需要好好体会.</p>

<p>方法定义:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1"># 没有&quot;:&quot;</span>
</span><span class='line'>    <span class="n">x</span><span class="o">*</span><span class="n">x</span>       <span class="c1"># 方法的返回值是最后一个表达式的值.</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>赋值:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="n">x</span>  <span class="o">=</span> <span class="mi">12</span>
</span><span class='line'><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="c1"># 可以同时赋值多个变量</span>
</span></code></pre></td></tr></table></div></figure>


<p>还有些值得一提的对象: 正则表达式对象(Regexp)和范围对象(Range):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span> <span class="o">===</span> <span class="mi">5</span>         <span class="c1"># 5在1..10中间</span>
</span><span class='line'><span class="sr">/\d{5}/</span> <span class="o">===</span> <span class="s2">&quot;12345&quot;</span> <span class="c1"># 匹配5个数字</span>
</span></code></pre></td></tr></table></div></figure>


<p>上面的1..10是Range, /d{5}/是Regexp.</p>

<p>然后是类了:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="k">class</span> <span class="nc">Seq</span>
</span><span class='line'>    <span class="kp">include</span> <span class="no">Enumerate</span> <span class="c1"># 导入Enumerate module</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">by</span><span class="p">)</span> <span class="c1"># 初始化函数, 和__init__一样.</span>
</span><span class='line'>        <span class="vi">@from</span><span class="p">,</span> <span class="vi">@to</span><span class="p">,</span> <span class="vi">@by</span> <span class="o">=</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">by</span> <span class="c1"># @表示的是类的属性.</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">each</span>
</span><span class='line'>    <span class="n">x</span> <span class="o">=</span> <span class="vi">@from</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="vi">@to</span> <span class="c1"># while做循环</span>
</span><span class='line'>        <span class="k">yield</span> <span class="n">x</span> <span class="c1"># 和python的yield一样.</span>
</span><span class='line'>        <span class="n">x</span> <span class="o">+=</span> <span class="vi">@by</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">s</span> <span class="o">=</span> <span class="no">Seq</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">s</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">print</span> <span class="n">x</span><span class="p">}</span> <span class="c1">#显示 &quot;13579&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>还有一些令人意外的东西:</p>

<p>ruby的字符串是可变的, 比如:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
</span><span class='line'><span class="n">s</span><span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="o">]=</span> <span class="s2">&quot;mo&quot;</span>
</span><span class='line'><span class="n">s</span> <span class="c1"># =&gt; &quot;hmolo&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ruby里面, 只有false和nil是假, 0和&#8221;&ldquo;都是为真, 需要注意.</p>

<h2>如何学习ruby</h2>

<p>直接去 `ruby看官方文档` 吧. 当然, 作者写的书: <a href="http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177">the ruby programming
language</a>
是深入了解ruby的基础, 和K&amp;R对C的重要性一样.</p>

<h2>结论</h2>

<p>花了一下午的时间熟悉ruby, 学习前, 感觉ruby会很繁杂,
以及会有&#8221;有了python干嘛学习ruby&#8221;的想法. 真正开始学了之后,
还是体会到一点ruby的精妙之处的. 个人感觉ruby离lisp比较近(当然,
只有lisp才有那么强大的宏). 等我再深入一点ruby, 再看看有什么意思吧. 恩,
还有ruby的神器: <a href="http://server.linjunhalida.com/blog/article/ruby_on_rails%E5%88%9D%E6%8E%A2/">ruby on
rails</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/http-intro/">Http_介绍</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-09T10:46:21+08:00" pubdate data-updated="true">Feb 9<span>th</span>, 2011</time>
        
         | <a href="/blog/http-intro/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://perl.apache.org/docs/2.0/user/handlers/http_cycle.gif" alt="image" /></p>

<p>HTTP是什么就不说了, 大家都知道.
这篇文章对HTTP实现方式的相关内容做一个整理, 满足大家的窥私欲望.</p>

<h2>用户如何利用HTTP</h2>

<p>先不管HTTP下面是如何实现的, 我们看看上层: 对于用户而言,
HTTP的使用很简单: 打开一个浏览器, 输入网址, 比如:
<a href="http://www.example.com">http://www.example.com</a>, 然后按回车,
浏览器就打开了一个界面. 整体工作逻辑就是</p>

<pre><code>发出网址(URL) --&gt; 服务器传回网站内容 --&gt; 浏览器显示界面
</code></pre>

<p>我们理清接口(不用去管浏览器渲染的部分):</p>

<p>输入
  ~ 用户给本地的一个程序URL信息</p>

<p>输出
  ~ 服务器返回状态, 以及HTML内容</p>

<h2>HTTP通讯过程</h2>

<p>HTTP是如何实现上面的目标的呢? HTTP直接利用TCP连接, 并且通讯模式很简单,
客户端发出一个请求, 服务器给出一个响应. 并且这个通讯过程是纯文本的.</p>

<p>我们看一个实际的例子, 通过telnet来直接看看HTTP是如何通讯的:</p>

<p>首先连接目标服务器, 80端口是HTTP协议的默认端口.</p>

<pre><code>halida@halida-desktop:~$ telnet tonycode.com 80
Trying 67.205.49.228...
Connected to tonycode.com.
Escape character is '^]'.
</code></pre>

<p>telnet连接上之后, 我们发出请求.</p>

<pre><code>GET / HTTP/1.1
Host: tonycode.com
</code></pre>

<p>&ldquo;GET&#8221;是HTTP请求的方法, &rdquo;/&ldquo;是获取资源的目录,
&#8220;HTTP/1.1&#8221;标示采用的是什么HTTP协议版本. &#8220;Host&#8221;行代表的是HTTP header,
请求附带的一些其他信息. cookie, 页面缓存等. 具体可见: `HTTP headers`</p>

<p>最后输入2行回车, 表示请求内容发送完毕.</p>

<p>下面是接收到的内容</p>

<pre><code>HTTP/1.1 200 OK
</code></pre>

<p>200是状态码, 表示&hellip;就是上面的OK, 请求处理完成.</p>

<pre><code>Date: Wed, 09 Feb 2011 01:06:45 GMT
Server: Apache
Last-Modified: Wed, 21 Apr 2010 15:49:54 GMT
ETag: "71de2eb-bce-484c1252b6c80"
Accept-Ranges: bytes
Content-Length: 3022
Vary: Accept-Encoding
Content-Type: text/html
</code></pre>

<p>然后就是返回的一串 `HTTP header`, 里面含有返回内容的信息等.</p>

<p>最后是正文了, 就是我们喜闻乐见的HTML文档了(太长就不显示出来了)</p>

<pre><code>&lt;!DOCTYPE html&gt; ...
</code></pre>

<p>整体过程就是那么简单. 更多的细节在 `HTTP` wiki文档.</p>

<h2>状态码</h2>

<p>不是每次请求都是200 OK的, 这里面列出一些常见的状态码:</p>

<p>200 OK
  ~ 没什么好说的.</p>

<p>400 Bad Request
  ~ 请求有问题.</p>

<p>404 Not Found
  ~ 最常见的错误, 无法在服务器上找到对应的资源.</p>

<p>403 Forbidden
  ~ 服务器禁止访问此资源.</p>

<p>其他的见: <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">status code
wiki页面</a></p>

<h2>连接状态</h2>

<p>HTTP/0.9, HTTP/1.0都是请求/响应后立刻断开,
HTTP/1.1里面可以同一个TCP连接使用多次,
以减小多次重复连接带来的资源消耗和延迟.</p>

<h2>cookies</h2>

<p>HTTP协议本身是无状态的, 一个请求一个响应, 就是那么简单.
但是很多时候我们需要记录状态, 比如用户登录等功能. 一般比较常用的是采用
<a href="http://en.wikipedia.org/wiki/HTTP_cookie">cookie</a> 的方式实现.</p>

<p>简单点说, 当客户端发出一个请求后, 服务器返回的HTTP header里面会带有一个</p>

<pre><code>Set-Cookie: name=value; name2=value2
</code></pre>

<p>的段, 然后客户端会把这个字符段缓存下来, 下次请求的时候,
就会在自己的header里面带上</p>

<pre><code>Cookie: name=value; name2=value2
</code></pre>

<p>就是这么简单. 其他一些技术细节, 比如cookie的作用时间和范围, 见
<a href="http://en.wikipedia.org/wiki/HTTP_cookie">cookie</a> wiki介绍.</p>

<h2>HTTPS</h2>

<p>HTTP本身是明文的, 非常不安全. 为了解决这方面的问题, 就有了HTTPS.</p>

<p>简单地说, HTTPS和HTTP的区别在于, 不是使用TCP作为连接方式,
而是采用SSL的方式来做连接, 上层应用层是没有多少变化的,
传输的时候数据做了加密, 以及连接到服务器的时候,
会有一套验证机制保证服务器是真正的服务器.</p>

<p>具体还是见 `HTTPS` 的wiki界面.</p>

<h2>结论</h2>

<p>HTTP协议很简单优雅, 或许是这样的简单优雅才承载起来一个庞大的web世界.
对它的掌握是web程序员必备的基础,
之后才能更好地理解在此之上的很多精妙应用.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/hackers-and-painters/">黑客与画家</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-07T18:48:49+08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2011</time>
        
         | <a href="/blog/hackers-and-painters/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://img3.douban.com/lpic/s4603101.jpg" alt="image" /></p>

<p>很久以前就耳闻 <a href="http://book.douban.com/subject/1395495/">hackers and
painters</a> 这本书,
终于在今年过年期间, 抽空看完了. 这本书有点像是杂文集,
里面的内容遥相呼应, 但又独立成章.</p>

<p>里面的核心思想: 黑客更像是艺术家, 而不是工程师或者科学家.
编程工具对于黑客而言, 像是画笔对于画家, 掌握了工具,
不代表能够创作出好的作品出来. 这篇文章可以见
<a href="http://www.cnblogs.com/leap-abead/articles/762178.html">作者博客</a>
(<a href="http://www.cnblogs.com/leap-abead/articles/762178.html">中文翻译</a>)
既然作者已经介绍得很清楚了, 我也不多说了. 我现在的问题是, <a href="http://www.zhihu.com/question/19557234">作为程序员,
技术能够花时间学到, 但是创造能力很难,
是否有提升的方法?</a></p>

<p>这本书没有给我带来太多的新知, 可能跟我已经看过很多类似的文章有关吧.
有人已经
<a href="http://www.ruanyifeng.com/blog/2009/12/i_will_translate_paul_graham.html">完成翻译工作了</a>,
但是好像现在还没有上市, 如果你真的像我一样时间很多,
或者英语阅读水平很好, 可以google一下, 有破解的英文版.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/26/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/24/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/radio-useless/">收音机没啥用了</a>
      </li>
    
      <li class="post">
        <a href="/blog/ipkvm/">低成本IPKVM控制多台主机</a>
      </li>
    
      <li class="post">
        <a href="/blog/bed-car/">床车方案</a>
      </li>
    
      <li class="post">
        <a href="/blog/car-air-conditioner/">床车空调方案</a>
      </li>
    
      <li class="post">
        <a href="/blog/work-in-car/">车作为第二空间</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/halida">@halida</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'halida',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2024 - 机械唯物主义 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>


</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'halidasvps';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
