---
layout: post
title: "什么通用数据交换格式更好"
date: 2015-08-29 16:34:06 +0800
comments: true
categories: 
---

考虑可以同时用来应对程序和人都需要阅读状况的通用数据格式，
几个层面：

首先是数据格式，需要能够支持：string, bool, number, time。
它们都应该是标准化了的。考虑不增加symbol，因为和string有概念上面的重复，
使用上会产生困扰。

然后是数据的组织方式。因为组织本身是不可变的，用map和list能够覆盖所有类型的数据组合方式，
并且是完备的。tuple这种冗余不需要。

最重要的是数据的表示方式。
人工阅读的数据应该容易阅读，所以数据要有换行和缩进，没有xml这种尾部冗余。
数据组织之间的切割应该用分割符，而不是换行。类似yaml这种换行分割会带来更多的问题。
数据应该同时有两种表示方式，一种文本格式，用utf8编码，方便人阅读，
一种二进制格式，机器处理更快，两种方式能够互相转换。

关于xml，如果说json是类型的组合，那么xml就是物件的组合，默认物件拥有属性和子项，
所以xml我觉得是一种非通用的格式，本质模型不适合进行通用数据交换。

根据上述考虑，我觉得合适的方案是：格式化之后(换行缩进)的json，结合bson来用。
比如RESTful的服务，返回的json默认增加缩进，同时也提供bson格式的返回，不考虑其他格式。
