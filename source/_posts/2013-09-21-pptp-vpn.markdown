---
layout: post
title: "如何设置PPTP VPN"
date: 2013-09-21 10:04
comments: true
categories: 
---

首先解释一下基本的概念。

我们平时上网的时候， 比如访问douban.com， 电脑做的操作是， 首先连接上douban.com的服务器， 然后告诉服务器， 需要获取豆瓣的网页。 然后服务器会返回首页信息， 自己的电脑接收到了之后， 通过浏览器显示出一张网页出来。

但是有的时候， 有些网站的网页（比如twitter）在传输过程中， 会在中间被政府屏蔽， 这样浏览器上面就会显示无法获取内容。

为了解决这个问题， 我们一般的解决方案就是， 利用一台可以获取网站内容的服务器（主要在国外， 不会在中间被政府屏蔽）， 下载好网页， 然后加密一下（这样在中间政府就不知道你这个网页需要屏蔽了）， 传输回自己的电脑。

简单画一下模型：

原先的方式：

    网站服务器 < - 政府会在这里审查你看的东西 - > 我的电脑
    
现在的方式：

    网站服务器 < - 这里是国外， 政府不审查 - > 中转服务器
    中转服务器 < - 数据加密了， 政府看不懂 - > 我的电脑
    
能够实现这样功能的网络通讯方式有很多种， 这里我们提供一种最容易设置的方式： PPTP VPN。

[VPN](http://zh.wikipedia.org/wiki/VPN)是一种网络虚拟技术， 简单地说， 就是你的电脑设置了VPN之后， 相当于和提供VPN的服务器在同一个局域网下面了， 你向网络发出的请求， 都通过这台服务器中转， 达到上面我们说需要实现的功能。

[PPTP](http://zh.wikipedia.org/wiki/PPTP)是一种实现VPN的方法， 具体原理就不多说了， 用它的主要原因是windows电脑都默认带有这种VPN通讯方式， 设置起来方便一些。 不过缺点是容易在中间被干扰， 不是很稳定。

## 设置方式

首先你需要购买或者要到一个PPTP代理服务器的账号和密码，购买的话请自行Google。

选择 开始 -> 控制面板， 点击网络和Internet连接， 在下面的页面点击： 创建一个到您的工作位置的网络连接。

{% img /images/posts/pptp_vpn_1.png %}

选择虚拟专用网络连接（Virtual Private Network）， 

{% img /images/posts/pptp_vpn_2.png %}

公司名称随便设置就好。

{% img /images/posts/pptp_vpn_3.png %}

主机选择提供VPN服务的主机名称或者IP地址。

{% img /images/posts/pptp_vpn_4.png %}

点击完成。

{% img /images/posts/pptp_vpn_5.png %}

创建VPN完毕后， 需要设置一下。 回到网络和Internet连接页面， 点击网络连接。

{% img /images/posts/pptp_vpn_6.png %}

你会看到刚刚建立的VPN网络， 右键点击属性：

{% img /images/posts/pptp_vpn_7.png %}

安全面板， 点击高级， 点击设置， 点击允许这些协议， 扣掉 Microsoft CHAP， 只留下面MS-CHAP2。 一般的linux下面PPTP代理服务器只支持这个。

{% img /images/posts/pptp_vpn_8.png %}

现在设置完毕了， 当你需要连接VPN的时候， 进入网络连接页面， 鼠标双击建立的网络。

{% img /images/posts/pptp_vpn_9.png %}

会打开输入密码页面， 在这里输入用户名和密码，如果你不希望每次都输入， 勾选下面的保存密码功能：

{% img /images/posts/pptp_vpn_10.png %}

如果一切正常， 点击连接之后， 就可以通过服务器访问国外网站了。 
当你连接的时候， 可能会出现问题：

{% img /images/posts/pptp_vpn_11.png %}

你可以重新再试几次， 但是如果一直有问题，那么应该是你电脑所在的网络会有一些问题，不支持PPTP VPN， 这个时候我也没有办法， 只能通过更加复杂的方式来翻一下墙， 或者换一个网络再试一下了。