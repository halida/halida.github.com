---
layout: post
title: "局域网时代下科学上网"
date: 2015-07-31 17:25:40 +0800
comments: true
categories: 
---

我们知道，最近各大运营商都提速了，大家随便就可以买到100M以上的网络。
但是国外出口没有配套提升，这样的结果就是，分到每个人的国际出口带宽就少了，
访问国外网站就成为一个非常痛苦的过程。中国的网络就此成为一个名副其实的局域网。

要解决访问国外网站的问题，需要两步：

- 要有一个保障国际出口带宽的国内服务。
- 要有一个国外流量中转服务来绕过我们都知道的防火墙干扰。

用户连接国内VPS的方案可以是VPN，可以是代理。我偏好VPN，因为全局翻墙下各种命令行工具也是可以用的。对于普通人来说只需要访问网页，各种代理协议也可以。

国内VPS连接国外VPS的方法最好是常见的VPN，为什么呢，因为常见VPN各大国内外企或者国内互联网公司也在用，防火墙不太会干扰这些主流业务。
如果用ssh，或者其它代理或者不知名的协议，一方面会被防火墙干扰，另外一方面包协议没有足够好的优先级，性能会差一些。

我觉得最好的解决方案是：国内一台有良好国际出口带宽的VPS和一台国外VPS结合，提供pptp/l2tp/anyconnect VPN服务。

这种方案我没有配置成功，因为不知道如何让国内VPS来做VPN中继。只能用其他的方案了：
结合[微林的云涟服务](https://vnet.link/soft/vxgg)以及ssh代理连到我买的国外VPS上网。

云涟是一个提供良好国外出口流量的服务，方法是用openvpn或者anyconnect连接到一个阿里云里面CN2网络的VPS上面。
有了好的出口带宽，之后用本地电脑命令行的ssh连到国外VPS，提供本地的一个sock5代理，再在浏览器上面设置代理访问网站。

具体操作：

- 注册云涟，按照教程，本地电脑连接上VPN。
- 购买一台便宜的国外VPS，比如[DigitalOcean](https://www.digitalocean.com)。
- 如果你是linux或者mac，在命令行执行 ssh -ND 1080 user@digital_ocean_vps_ip。
- 设置浏览器的代理，用sock5，地址是127.0.0.1，端口1080。

我现在用这种方法，访问国外网站非常顺畅，速度可以达到1MB/s。
不过，成本会高一些，云涟的费用是1块钱每G，国内流量的费用是比较高的。
国外VPS就便宜了，DigitalOcean是5美元一个月。

期待有科学上网服务商提供这样的整体方案，省得大家自己弄了。
